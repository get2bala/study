<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Study Smarter: Superpowers for Your Brain</title>
  <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">
  <style>
    /* ... (Your existing CSS) ... */
  </style>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
  <header>
    <h1>Study Smarter: Superpowers for Your Brain</h1>
    <p>Level up your learning with fun techniques, examples, and helpful AI tools ðŸŽ“</p>
  </header>

  <div id="content"></div>

  <footer>
    Â© 2025 Study Smarter | Built with love for curious students ðŸ’¡
  </footer>

  <script>
    const { createClient } = supabase;
    const SUPABASE_URL = 'https://azfipkxegjydpalygjxx.supabase.co'; // Replace with your Supabase URL
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF6Zmlwa3hlZ2p5ZHBhbHlnanh4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDUxNTQ4OTgsImV4cCI6MjA2MDczMDg5OH0.u_itSrBff5Y5jtT8ozPWGmsLF9Zq3aCXBtwiMPVIOvQ'; // Replace with your Supabase Anon Key

    const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    async function fetchAndBuildUI() {
      try {
        const { data: sections, error: sectionsError } = await supabase
          .from('sections')
          .select('id, name');

        if (sectionsError) {
          throw sectionsError;
        }

        const { data: tiles, error: tilesError } = await supabase
          .from('tiles')
          .select('name, content, section_id');

        if (tilesError) {
          throw tilesError;
        }

        buildUI(sections, tiles);
      } catch (error) {
        console.error('Error fetching data:', error);
        document.getElementById('content').textContent = "Failed to load data.";
      }
    }

    function buildUI(sections, tiles) {
      const container = document.getElementById('content');
      const sectionMap = {};

      // Organize tiles by section ID
      tiles.forEach(tile => {
        if (!sectionMap[tile.section_id]) {
          sectionMap[tile.section_id] = [];
        }
        sectionMap[tile.section_id].push(tile);
      });

      // Create sections and tiles
      sections.forEach(section => {
        const sectionClass = section.name.toLowerCase().replace(/\s+/g, '-');
        const sectionEl = document.createElement('section');
        sectionEl.className = `section ${sectionClass}`;
        sectionEl.innerHTML = `<h2>${section.name}</h2><div class="tile-grid"></div>`;
        const tileGrid = sectionEl.querySelector('.tile-grid');

        if (sectionMap[section.id]) {
          sectionMap[section.id].forEach(tile => {
            const tileEl = document.createElement('div');
            tileEl.className = 'tile';
            tileEl.innerHTML = `<h3>${tile.name}</h3><p>${tile.content}</p>`;
            tileGrid.appendChild(tileEl);
          });
        }
        container.appendChild(sectionEl);
      });
    }

    fetchAndBuildUI();
  </script>
</body>
</html>